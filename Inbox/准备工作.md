---
create_time: 2025-06-05T22:58:00
update_time: 2025/06/08 12:40
priority: 20
---

## è·¯å¾„åˆ«åé…ç½®

> [!quote]
> [resolve.alias \| å…±äº«é€‰é¡¹ \| Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://cn.vitejs.dev/config/shared-options.html#resolve-alias)

åœ¨ [Vite](https://cn.vitejs.dev/) é¡¹ç›®ä¸­é…ç½®è·¯å¾„åˆ«åï¼ˆå¦‚ `@` æŒ‡å‘ `src` ç›®å½•ï¼‰å¯æœ‰æ•ˆé¿å…æ¨¡å—å¯¼å…¥è·¯å¾„è¿‡é•¿ã€å±‚çº§æ··ä¹±ç­‰é—®é¢˜ï¼Œæå‡é¡¹ç›®çš„å¯è¯»æ€§å’Œå¼€å‘æ•ˆç‡ã€‚

ä»¥ä¸‹æ˜¯é…ç½® `@` æŒ‡å‘ `src` çš„å…·ä½“æ­¥éª¤ï¼š

1. é…ç½® `vite.config.ts`

	```ts hl:3,8-12
	import { defineConfig } from 'vite'
	import vue from '@vitejs/plugin-vue'
	import { fileURLToPath, URL } from 'node:url'
	
	// https://vite.dev/config/
	export default defineConfig({
	  plugins: [vue()],
	  resolve: {
	    alias: {
	      '@': fileURLToPath(new URL('./src', import.meta.url)),
	    },
	  },
	})
	```

2. é…ç½® `tsconfig.json`

	```json hl:2-7
	{
	  "compilerOptions": {
	    "baseUrl": ".",
	    "paths": {
	      "@/*": ["src/*"]
	    }
	  }
	}
	```

> [!note]
> ä¿®æ”¹åè¯·é‡å¯ VSCodeï¼Œä»¥ç¡®ä¿è·¯å¾„åˆ«åç”Ÿæ•ˆã€‚

## CSS é¢„å¤„ç†å™¨

> [!quote]
> [CSS é¢„å¤„ç†å™¨ \| åŠŸèƒ½ \| Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://vitejs.cn/vite3-cn/guide/features.html#css-pre-processors)

ç”±äº Vite çš„ç›®æ ‡ä»…ä¸ºç°ä»£æµè§ˆå™¨ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨åŸç”Ÿ CSS å˜é‡å’Œå®ç° CSSWG è‰æ¡ˆçš„ PostCSS æ’ä»¶ï¼ˆä¾‹å¦‚Â [postcss-nesting](https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-nesting)ï¼‰æ¥ç¼–å†™ç®€å•çš„ã€ç¬¦åˆæœªæ¥æ ‡å‡†çš„ CSSã€‚

è¯è™½å¦‚æ­¤ï¼Œä½† Vite ä¹ŸåŒæ—¶æä¾›äº†å¯¹Â `.scss`,Â `.sass`,Â `.less`,Â `.styl`Â å’ŒÂ `.stylus`Â æ–‡ä»¶çš„å†…ç½®æ”¯æŒã€‚æ²¡æœ‰å¿…è¦ä¸ºå®ƒä»¬å®‰è£…ç‰¹å®šçš„ Vite æ’ä»¶ï¼Œä½†å¿…é¡»å®‰è£…ç›¸åº”çš„é¢„å¤„ç†å™¨ä¾èµ–ï¼š

```bash hl:2
.scss and .sass
pnpm add -D sass-embedded # æˆ– sass

.less
pnpm add -D less

.styl and .stylus
pnpm add -D stylus
```

å¦‚æœä½¿ç”¨çš„æ˜¯**å•æ–‡ä»¶ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡Â `<style lang="scss">`ï¼ˆæˆ–å…¶ä»–é¢„å¤„ç†å™¨ï¼‰è‡ªåŠ¨å¼€å¯**ã€‚

Vite ä¸º [Sass](https://github.com/sass) å’Œ [Less](https://github.com/less) æ”¹è¿›äº†Â `@import`Â è§£æï¼Œä»¥ä¿è¯ Vite åˆ«åä¹Ÿèƒ½è¢«ä½¿ç”¨ã€‚å¦å¤–ï¼Œ`url()`Â ä¸­çš„ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„ï¼Œä¸æ ¹æ–‡ä»¶ä¸åŒç›®å½•ä¸­çš„ Sass/Less æ–‡ä»¶ä¼šè‡ªåŠ¨å˜åŸºä»¥ä¿è¯æ­£ç¡®æ€§ã€‚

ç”±äº [Stylus](https://github.com/stylus) API é™åˆ¶ï¼Œ`@import`Â åˆ«åå’Œ URL å˜åŸºä¸æ”¯æŒ Stylusã€‚

æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨æ–‡ä»¶æ‰©å±•åå‰åŠ ä¸ŠÂ `.module`Â æ¥ç»“åˆä½¿ç”¨ CSS modules å’Œé¢„å¤„ç†å™¨ï¼Œä¾‹å¦‚Â `style.module.scss`ã€‚

## ElementPlus é›†æˆ

> [!quote]
> [ä¸€ä¸ª Vue3 UI æ¡†æ¶ \| Element Plus](https://element-plus.org/zh-CN/)

### å®‰è£…

```bash
pnpm install element-plus
```

> [!note] å…¼å®¹æ€§
> åœ¨ `2.8.5` åŠä»¥åçš„ç‰ˆæœ¬,Â [Sass](https://github.com/sass)Â çš„æœ€ä½æ”¯æŒç‰ˆæœ¬ä¸ºÂ `1.79.0`.
> è‹¥ç»ˆç«¯æç¤ºÂ `legacy JS API Deprecation Warning` è­¦å‘Š, æ‚¨å¯ä»¥åœ¨ `vite.config.ts` æ–‡ä»¶ä¸­æ·»åŠ Â [css.preprocessorOptions](https://cn.vite.dev/config/shared-options#css-preprocessoroptions)Â çš„é…ç½®ï¼ŒæŒ‡å®šä½¿ç”¨æ–°ç‰ˆ APIï¼š
>
> ```ts hl: 1-5
> css: {
>      preprocessorOptions: {
>        scss: { api: 'modern-compiler' },
>      }
> }
> ```

### ç”¨æ³•

#### å®Œæ•´å¼•å…¥

å¦‚æœæ‚¨å¯¹æ‰“åŒ…åçš„æ–‡ä»¶å¤§å°ä¸æ˜¯å¾ˆåœ¨ä¹ï¼Œé‚£ä¹ˆä½¿ç”¨å®Œæ•´å¯¼å…¥ä¼šæ›´æ–¹ä¾¿ã€‚

```ts file:main.ts hl:6-7,13
import { createApp } from 'vue'
import './style.css'
import App from './App.vue'
import router from '@/router'
import { createPinia } from 'pinia'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

const app = createApp(App)

app.use(router)
app.use(createPinia())
app.use(ElementPlus)

app.mount('#app')
```

##### Volar æ”¯æŒ

å¦‚æœæ‚¨ä½¿ç”¨ [Volar](https://marketplace.visualstudio.com/items?itemName=Vue.volar)ï¼Œè¯·åœ¨ `tsconfig.json` ä¸­é€šè¿‡ `compilerOptions.type` æŒ‡å®šå…¨å±€ç»„ä»¶ç±»å‹ã€‚

```json hl:4
{
  "compilerOptions": {
    // ...
    "types": ["element-plus/global"]
  }
}
```

#### æŒ‰éœ€å¯¼å…¥ï¼ˆæ¨èï¼‰

##### å®‰è£…æ’ä»¶

é¦–å…ˆæ‚¨éœ€è¦å®‰è£… [[Vite#unplugin-vue-components|unplugin-vue-components]] å’ŒÂ [[Vite#unplugin-auto-import|unplugin-auto-import]] è¿™ä¸¤æ¬¾æ’ä»¶ï¼š

```bash
pnpm install -D unplugin-vue-components unplugin-auto-import
```

##### é…ç½® `vite.config.ts`

```ts hl:2-4,9-34
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    AutoImport({
      // è‡ªåŠ¨å¯¼å…¥ Vue ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šref, reactive, toRef ç­‰
      // è‡ªåŠ¨å¯¼å…¥ VueRouter ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šuseRouter ç­‰
      // è‡ªåŠ¨å¯¼å…¥ Pinia ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šcreatePiniaï¼ŒdefineStoreï¼ŒstoreToRefs ç­‰
      // å‚è€ƒè‡ªï¼š https://github.com/sxzz/element-plus-best-practices/blob/main/vite.config.ts
      imports: ['vue', 'vue-router', 'pinia'],
      // è‡ªå®šä¹‰è§£æå™¨
      resolvers: [
        // è‡ªåŠ¨å¯¼å…¥ Element Plus ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šElMessage, ElMessageBox... (å¸¦æ ·å¼)
        ElementPlusResolver(),
      ],
      // æŒ‡å®šå“ªäº›ç›®å½•ä¸‹çš„æ–‡ä»¶éœ€è¦è¢«æ‰«æï¼Œå¹¶è‡ªåŠ¨å¯¼å…¥è¿™äº›æ–‡ä»¶ä¸­å¯¼å‡ºçš„å‡½æ•°ã€å˜é‡ç­‰
      dirs: ['src/composables/**'],
      // æŒ‡å®šç”Ÿæˆçš„ç±»å‹å£°æ˜æ–‡ä»¶è·¯å¾„
Â  Â  Â  dts: 'src/types/auto-imports.d.ts',
    }),
    Components({
      resolvers: [
        // è‡ªåŠ¨æ³¨å†Œ Element Plus ç»„ä»¶
        ElementPlusResolver(),
      ],
      // æŒ‡å®šè‡ªå®šä¹‰ç»„ä»¶ä½ç½®
      dirs: ['src/**/components'],
	  // æŒ‡å®šç”Ÿæˆçš„ç±»å‹å£°æ˜æ–‡ä»¶è·¯å¾„
Â  Â  Â  dts: 'src/types/components.d.ts',
    }),
  ],
})

```

##### è§£å†³ ESLint æŠ¥é”™

![[Vite#æŠ¥é”™ä¿¡æ¯]]

![[Vite#æ–¹æ¡ˆä¸€ï¼šç›´æ¥ç¦ç”¨ `no-undef` è§„åˆ™ï¼ˆæ¨èï¼‰]]

##### TypeScript ç±»å‹æ”¯æŒ

ä¸ºäº†è·å¾—å®Œå–„çš„ç±»å‹æç¤ºä¸è‡ªåŠ¨è¡¥å…¨ï¼Œ`unplugin-auto-import` ä¸ `unplugin-vue-components` ä¼šè‡ªåŠ¨ç”Ÿæˆ `auto-imports.d.ts` å’Œ `components.d.ts` ç±»å‹å£°æ˜æ–‡ä»¶ã€‚

æ— éœ€æ‰‹åŠ¨å°†è¿™ä¸¤ä¸ª `.d.ts` æ–‡ä»¶æ˜¾å¼æ·»åŠ è‡³ `tsconfig.app.json` çš„ `include` ä¸­ã€‚å› ä¸ºï¼š
- `"src/**/*.ts"` ä¼šè‡ªåŠ¨åŒ¹é… `src` ç›®å½•ä¸‹æ‰€æœ‰çš„ `.ts` å’Œ `.d.ts` æ–‡ä»¶ï¼›
- è‡ªåŠ¨ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ä½äº `src/types/`ï¼Œå·²åŒ…å«åœ¨è¯¥èŒƒå›´å†…ã€‚

å› æ­¤ï¼Œä¿ç•™é»˜è®¤é…ç½®å³å¯ï¼Œæ— éœ€é¢å¤–å¤„ç†ã€‚

```ts file:tsconfig.app.json hl:17
{
  "extends": "@vue/tsconfig/tsconfig.dom.json",
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true,

    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src/**/*.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

## UnoCSS é›†æˆ

> [!quote]
> [é‡æ–°æ„æƒ³åŸå­åŒ– CSS (antfu.me)](https://antfu.me/posts/reimagine-atomic-css-zh)

[**UnoCSS**](https://unocss.dev/) æ˜¯ä¸€ä¸ªæç®€ã€æ€§èƒ½æè‡´çš„åŸå­åŒ– CSS å¼•æ“ï¼Œçµæ„Ÿæ¥è‡ª [Tailwind CSS](https://github.com/tailwindlabs/tailwindcss) å’Œ [Windi CSS](https://github.com/windicss/windicss)ã€‚å®ƒé€šè¿‡"æŒ‰éœ€ç”Ÿæˆï¼ˆon-demand generationï¼‰"ç­–ç•¥ï¼Œä»…æ„å»ºé¡µé¢ä¸­å®é™…ç”¨åˆ°çš„æ ·å¼ï¼Œæå¤§åœ°å‡å°‘äº†æœ€ç»ˆ CSS çš„ä½“ç§¯ï¼Œå¹¶æä¾›é«˜åº¦çš„å¯å®šåˆ¶æ€§å’Œçµæ´»çš„æ‰©å±•æœºåˆ¶ã€‚

- **æé€Ÿæ„å»º**ï¼šçœŸæ­£çš„æŒ‰éœ€ç”Ÿæˆï¼Œæ— éœ€æ„å»ºå®Œæ•´çš„æ ·å¼æ–‡ä»¶ï¼Œé¦–æ¬¡æ„å»ºå’Œçƒ­æ›´æ–°é€Ÿåº¦æå¿«ã€‚
- **åŸå­åŒ–è®¾è®¡**ï¼šç±»åå³åŠŸèƒ½ï¼Œç»„åˆçµæ´»ï¼Œé¿å…å†—ä½™ç±»å®šä¹‰ã€‚
- **é«˜åº¦å¯é…ç½®**ï¼šå¯é…ç½®è§„åˆ™ã€é¢„è®¾ã€å˜ä½“ã€ä¸»é¢˜ç­‰ï¼Œæ”¯æŒå®Œå…¨è‡ªå®šä¹‰è¯­æ³•å’Œè¡Œä¸ºã€‚
- **å¤šæ¨¡å¼æ”¯æŒ**ï¼šæ”¯æŒ class æ¨¡å¼ï¼ˆç±»åå†™æ³•ï¼‰ã€Attributify æ¨¡å¼ï¼ˆå±æ€§å†™æ³•ï¼‰ï¼Œç”šè‡³ç»„åˆä½¿ç”¨ã€‚
- **æ’ä»¶ç”Ÿæ€ä¸°å¯Œ**ï¼šæä¾›ä¸°å¯Œçš„å®˜æ–¹é¢„è®¾ï¼ˆpresetsï¼‰ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰æ’ä»¶æœºåˆ¶ã€‚
- **æè‡´ä½“ç§¯ä¼˜åŒ–**ï¼šç”Ÿæˆçš„ CSS ä½“ç§¯æå°ï¼Œé€‚åˆä»»ä½•éœ€è¦ä¼˜åŒ–é¦–å±åŠ è½½çš„ç°ä»£ Web åº”ç”¨ã€‚
- **æ¡†æ¶æ— å…³**ï¼šå¯ç”¨äº Vueã€Reactã€Svelteã€Solidã€åŸç”Ÿ HTML ç­‰å„ç§æŠ€æœ¯æ ˆä¸­ã€‚

### VSCode æ’ä»¶æ”¯æŒ

æ¨èå®‰è£…å®˜æ–¹æ’ä»¶ï¼š[UnoCSS](https://marketplace.visualstudio.com/items/?itemName=antfu.unocss)ï¼Œå¯åœ¨ç¼–è¾‘å™¨ä¸­å®æ—¶é«˜äº®ç±»åã€é¢„è§ˆæ ·å¼ï¼Œå¹¶æç¤ºè¯­æ³•é”™è¯¯ï¼š
![](https://img.xiaorang.fun/202505072353096.png)

### é›†æˆ

#### åœ¨ Vite ä¸­é›†æˆ UnoCSS

> [!quote]
> [UnoCSS Vite Plugin](https://unocss.dev/integrations/vite)

##### å®‰è£…

```bash
pnpm add -D unocss
```

##### é…ç½® `vite.config.ts`

```ts hl:3,7
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import UnoCSS from 'unocss/vite'

// https://vite.dev/config/
export default defineConfig({
  plugins: [vue(), UnoCSS()],
})
```

##### åˆ›å»º UnoCSS é…ç½®æ–‡ä»¶ `uno.config.ts`

```ts hl:1-5
import { defineConfig } from 'unocss'

export default defineConfig({
  // ...UnoCSS options
})
```

##### å¼•å…¥ UnoCSS æ ·å¼

```ts file:main.ts
import 'virtual:uno.css'
```

#### åœ¨ ESLint ä¸­é›†æˆ UnoCSS

ä¸ºç»Ÿä¸€åŸå­ç±»å’Œ Attributify å±æ€§çš„ä¹¦å†™é¡ºåºï¼Œé¿å…æ ·å¼æ··ä¹±ï¼ŒUnoCSS æä¾›äº†å®˜æ–¹ ESLint æ’ä»¶ï¼Œæ¨èåœ¨ Flat é…ç½®æ¨¡å¼ä¸­ä½¿ç”¨ã€‚

##### å®‰è£…

```bash
pnpm add -D @unocss/eslint-config
```

##### é…ç½® `eslint.config.js`

```js hl:2,6
import { defineConfig } from 'eslint/config' // ç”¨äºç±»å‹å®‰å…¨åœ°å®šä¹‰ ESLint é…ç½®ï¼ˆFlat æ¨¡å¼ä¸“ç”¨ï¼‰
import unocss from '@unocss/eslint-config/flat' // UnoCSS å®˜æ–¹ ESLint Flat æ¨¡å¼è§„åˆ™é›†ï¼ˆåŒ…å«åŸå­ç±»é¡ºåºå’Œ attributify å±æ€§é¡ºåºæ ¡éªŒç­‰ï¼‰

export default defineConfig([
  // å¼•å…¥ UnoCSS ESLint æ’ä»¶ï¼ˆé»˜è®¤å¯ç”¨ order/order-attributifyï¼‰
  unocss,
])
```

##### è§„åˆ™è¯´æ˜

UnoCSS ESLint æ’ä»¶å†…ç½®ä»¥ä¸‹è§„åˆ™ï¼Œç”¨äºè§„èŒƒ class å’Œå±æ€§çš„ä¹¦å†™é¡ºåºã€å±è”½é«˜é£é™©åŸå­ç±»ã€å¹¶ç¡®ä¿æ ·å¼åˆæ³•æ€§ï¼Œä»è€Œæå‡ä»£ç å¯ç»´æŠ¤æ€§ï¼š

| è§„åˆ™å                             | åŠŸèƒ½æè¿°                                         | é»˜è®¤çŠ¶æ€    |
| ------------------------------- | -------------------------------------------- | ------- |
| `@unocss/order`                 | å¼ºåˆ¶ class åŸå­ç±»çš„æ’åˆ—é¡ºåºï¼Œé¿å…æ··ä¹±                       | âœ… å·²å¯ç”¨   |
| `@unocss/order-attributify`     | å¼ºåˆ¶ Attributify æ¨¡å¼ä¸‹å±æ€§çš„æ’åˆ—é¡ºåºï¼Œå¢å¼ºå¯è¯»æ€§              | âœ… å·²å¯ç”¨   |
| `@unocss/blocklist`             | ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„ class åŸå­ç±»ï¼ˆå¦‚ `fixed`ã€`hidden` ç­‰é«˜é£é™©æ ·å¼ï¼‰ | â›” éœ€æ‰‹åŠ¨å¯ç”¨ |
| `@unocss/enforce-class-compile` | å¼ºåˆ¶æ‰€æœ‰ class å¿…é¡»å¯è¢« UnoCSS æ­£ç¡®è§£æï¼Œé¿å…æ‹¼å†™é”™è¯¯æˆ–æ— æ•ˆç±»åæ»¥ç”¨    | â›” éœ€æ‰‹åŠ¨å¯ç”¨ |

ä¾‹å¦‚å¯ç”¨é¢å¤–è§„åˆ™ï¼š

```js
{
  rules: {
    '@unocss/blocklist': ['error', ['fixed', 'hidden']],
    '@unocss/enforce-class-compile': 'warn',
  },
}
```

##### ç¤ºä¾‹æ¼”ç¤º

âœ… **æ¨èå†™æ³•**

```html
<div class="mt-10 h-[100px] w-[100px] bg-red font-600" text-white font-600>å°æ©˜çŒ«</div>
```

âŒ **é”™è¯¯å†™æ³•**ï¼š

```html
<div class="h-[100px] mt-10 w-[100px] bg-red font-600" font-600 text-white>å°æ©˜çŒ«</div>
```

- `mt-10` åº”æ’åœ¨ `h-[100px]` å‰ï¼Œè¿å `@unocss/order` è§„åˆ™
- `text-white` åº”æ’åœ¨ `font-600` å‰ï¼Œè¿å `@unocss/order-attributify` è§„åˆ™

è¿™äº›é—®é¢˜å°†ç”± UnoCSS ESLint æ’ä»¶è‡ªåŠ¨æç¤ºï¼Œå¸®åŠ©å¼€å‘è€…åŠæ—¶è°ƒæ•´åŸå­ç±»ä¸å±æ€§é¡ºåºï¼Œç¡®ä¿ä»£ç ä¸€è‡´æ€§ä¸å¯è¯»æ€§ï¼š
![](https://img.xiaorang.fun/202505081226786.png)

### é¢„è®¾ (Presets)

UnoCSS æä¾›å¤šç§åŠŸèƒ½å¼ºå¤§çš„é¢„è®¾ï¼ˆå¦‚ `@unocss/preset-uno`ã€`@unocss/preset-wind3`ã€`@unocss/preset-attributify`ï¼‰ï¼Œå¯çµæ´»ç»„åˆä»¥æ»¡è¶³ä¸åŒé¡¹ç›®éœ€æ±‚ã€‚

#### Uno é¢„è®¾ (é»˜è®¤ & å·²åºŸå¼ƒ)

`@unocss/preset-uno` æ˜¯ UnoCSS å®˜æ–¹æ—©æœŸ**é»˜è®¤çš„æ ¸å¿ƒé¢„è®¾**ï¼Œæä¾›ç±»ä¼¼ Tailwind CSS çš„åŸå­ç±»ä½“ç³»ï¼Œæ”¯æŒæ•°åƒä¸ªå¸¸ç”¨å·¥å…·ç±»ï¼Œè¦†ç›–å°ºå¯¸ã€é¢œè‰²ã€å¸ƒå±€ã€çŠ¶æ€ã€å“åº”å¼ç­‰åœºæ™¯ï¼š
- **å°ºå¯¸ç±»**ï¼š`w-100`ã€`h-full`ã€`min-w-screen`
- **é¢œè‰²ç±»**ï¼š`text-red-500`ã€`bg-gray-100`
- **å¸ƒå±€ç±»**ï¼š`flex`ã€`grid`ã€`items-center`
- **çŠ¶æ€ç±»**ï¼š`hover: bg-blue-400`ã€`dark: text-white`
- **å“åº”å¼ç±»**ï¼š`md: px-4`ã€`lg: text-xl`

å®ƒæ˜¯ UnoCSS çš„é‡è¦æ„å»ºå—ï¼Œå¼€ç®±å³ç”¨ï¼Œé€‚åˆè¿½æ±‚å¿«é€Ÿå¼€å‘å’Œç®€æ´ CSS çš„é¡¹ç›®ã€‚

> [!warning]
> `@unocss/preset-uno` **å·²è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ˆdeprecatedï¼‰**ï¼Œå®˜æ–¹æ¨èæ”¹ç”¨åŠŸèƒ½æ›´å¼ºã€ç»“æ„æ›´ç°ä»£çš„ [`@unocss/preset-wind3`](https://unocss.dev/presets/wind3)ã€‚
> ä½†å®ƒä»åœ¨ `unocss` ä¸»åŒ…ä¸­å†…ç½®ï¼Œæ—§é¡¹ç›®ä»å¯å…¼å®¹ä½¿ç”¨ã€‚

##### å®‰è£… (å¯é€‰)

```bash
pnpm add -D @unocss/preset-uno
```

> [!tip]
> è¯¥é¢„è®¾å·²å†…ç½®äº `unocss` åŒ…ä¸­ï¼Œé€šå¸¸æ— éœ€å•ç‹¬å®‰è£…ï¼Œç›´æ¥å¯¼å…¥å³å¯ï¼š
>
> ```ts
> import { presetUno } from 'unocss'
> ```

##### é…ç½® `uno.config.ts` (å¯é€‰)

```ts hl:1,4
import { defineConfig, presetUno } from 'unocss'

export default defineConfig({
  presets: [presetUno()],
})
```

> [!tip] é»˜è®¤è¡Œä¸º
> UnoCSS é»˜è®¤å¯ç”¨è¯¥é¢„è®¾ï¼Œåªæœ‰åœ¨**è‡ªå®šä¹‰é¢„è®¾ç»„åˆ**æˆ–**è¦†ç›–é»˜è®¤è¡Œä¸º**æ—¶æ‰éœ€è¦æ˜¾å¼æ·»åŠ ã€‚

#### Wind3 é¢„è®¾ (æ¨è)

`@unocss/preset-wind3` æ˜¯ UnoCSS å®˜æ–¹æ¨èçš„æ–°ä¸€ä»£é¢„è®¾ï¼Œæ—¨åœ¨æ›¿ä»£æ—©æœŸçš„ `preset-uno`ã€‚å®ƒå…¼å®¹å¤§å¤šæ•° Tailwind CSS å·¥å…·ç±»ï¼Œé»˜è®¤é£æ ¼æ›´ç°ä»£ï¼Œç»“æ„æ›´æ¸…æ™°ï¼Œé€‚ç”¨äºè¿½æ±‚çµæ´»æ€§å’Œè¯­ä¹‰åŒ–çš„é¡¹ç›®å¼€å‘ã€‚

- âœ… ç±»ä¼¼ Tailwind çš„è¯­æ³•å…¼å®¹æ€§
- âœ… å†…ç½®æ›´ç°ä»£çš„è®¾è®¡è¶‹åŠ¿ï¼ˆå¦‚ `container` è‡ªåŠ¨å±…ä¸­ç­‰ï¼‰
- âœ… æ¨èä¸ `preset-attributify` æ­é…ä½¿ç”¨ä»¥å¯ç”¨å±æ€§å†™æ³•

##### å®‰è£… (å¯é€‰)

```bash
pnpm add -D @unocss/preset-wind3
```

> [!tip]
> è¯¥é¢„è®¾å·²å†…ç½®äº `unocss` åŒ…ä¸­ï¼Œé€šå¸¸æ— éœ€å•ç‹¬å®‰è£…ï¼Œç›´æ¥å¯¼å…¥å³å¯ï¼š
>
> ```ts
> import { presetWind3 } from 'unocss'
> ```

##### é…ç½® `uno.config.ts`

```ts hl:1,4
import { defineConfig, presetWind3 } from 'unocss'

export default defineConfig({
  presets: [presetWind3()],
})
```

#### Attributify é¢„è®¾ (å±æ€§åŒ–å†™æ³•æ”¯æŒ)

`@unocss/preset-attributify` é¢„è®¾å…è®¸ä»¥ HTML å±æ€§çš„æ–¹å¼ä¹¦å†™åŸå­ç±»ï¼Œç»“æ„æ›´æ¸…æ™°ã€è¯­ä¹‰æ›´ç›´è§‚ï¼Œç‰¹åˆ«é€‚åˆç»„ä»¶åŒ–å¼€å‘ä¸åŠ¨æ€æ ·å¼ç»‘å®šã€‚

##### å®‰è£… (å¯é€‰)

```bash
pnpm add -D @unocss/preset-attributify
```

> [!tip]
> è¯¥é¢„è®¾å·²å†…ç½®äº `unocss` åŒ…ä¸­ï¼Œé€šå¸¸æ— éœ€å•ç‹¬å®‰è£…ï¼Œç›´æ¥å¯¼å…¥å³å¯ï¼š
>
> ```ts
> import { presetAttributify } from 'unocss'
> ```

##### é…ç½® `uno.config.ts`

```ts hl:1,4
import { defineConfig, presetWind3, presetAttributify } from 'unocss'

export default defineConfig({
  presets: [presetWind3(), presetAttributify()],
})
```

##### ç¤ºä¾‹å¯¹æ¯”

ä¼ ç»Ÿå†™æ³•ä¸­ï¼Œæ ·å¼ç±»é›†ä¸­å †å åœ¨ `class` å±æ€§ä¸­ï¼Œæ—¢å†—é•¿åˆä¸æ˜“ç»´æŠ¤ï¼š

```html
<button class="bg-blue-400 hover:bg-blue-500 text-sm text-white font-mono font-light py-2 px-4 rounded border-2 border-blue-200 dark:bg-blue-500 dark:hover:bg-blue-600">
  Button
</button>
```

å€ŸåŠ© **Attributify æ¨¡å¼**ï¼Œæ‚¨å¯ä»¥å°†åŸå­ç±»æ‹†åˆ†æˆå…·å¤‡è¯­ä¹‰çš„å±æ€§ï¼š

```html
<button
  bg="blue-400 hover:blue-500 dark:blue-500 dark:hover:blue-600"
  text="sm white"
  font="mono light"
  p="y-2 x-4"
  border="2 rounded blue-200"
>
  Button
</button>
```

ä¾‹å¦‚ `text-sm text-white` åˆå¹¶ä¸º `text="sm white"`ï¼Œå‡å°‘é‡å¤å‰ç¼€ï¼Œä»£ç æ›´ç®€æ´ã€‚

> [!tip]
> é™¤ç»„åˆå±æ€§å†™æ³•å¤–ï¼ŒAttributify ä¹Ÿæ”¯æŒå°†æ¯ä¸ªåŸå­ç±»ç›´æ¥å†™ä½œå±æ€§åï¼Œæ— éœ€ä½¿ç”¨ `class=""`ï¼š
>
> ```html
> <div h-100px w-100px flex items-center justify-center bg-red-300 text-sm text-white font-600 font-mono border-3 border-red rounded-2xl border-dashed>
>   å°æ©˜çŒ«
> </div>
> ```

### è½¬æ¢å™¨ (Transformers)

UnoCSS æä¾›å¤šç§è½¬æ¢å™¨ï¼Œå¯å¢å¼ºåŸå­ç±»åœ¨çœŸå®å·¥ç¨‹ä¸­çš„è¡¨è¾¾åŠ›ä¸çµæ´»æ€§ã€‚

#### æŒ‡ä»¤è½¬æ¢å™¨

`@unocss/transformer-directives` æ˜¯ä¸€ä¸ª**æŒ‡ä»¤å¼è¯­æ³•è½¬æ¢å™¨**ï¼Œæ”¯æŒåœ¨ CSS æˆ– `<style>` æ ‡ç­¾ä¸­ä½¿ç”¨ç±»ä¼¼ Tailwind çš„ `@apply`ã€`@screen`ã€`theme ()` ç­‰æŒ‡ä»¤ï¼Œæå¤§æå‡äº†æ ·å¼ç¼–å†™çš„ç›´è§‚æ€§ä¸å¤ç”¨æ€§ã€‚

##### å®‰è£… (å¯é€‰)

```bash
pnpm add -D @unocss/transformer-directives
```

> [!tip]
> è¯¥é¢„è®¾å·²å†…ç½®äº `unocss` åŒ…ä¸­ï¼Œé€šå¸¸æ— éœ€å•ç‹¬å®‰è£…ï¼Œç›´æ¥å¯¼å…¥å³å¯ï¼š
>
> ```ts
> import { transformerDirectives } from 'unocss'
> ```

##### é…ç½® `uno.config.ts`

```ts hl:1,5
import { defineConfig, presetWind3, presetAttributify, transformerDirectives } from 'unocss'

export default defineConfig({
  presets: [presetWind3(), presetAttributify()],
  transformers: [transformerDirectives()],
})
```

##### ä½¿ç”¨ç¤ºä¾‹

```css hl:1-3
.box {
  @apply px-4 py-2 rounded bg-blue-500 hover:bg-blue-600 text-white;
}
```

é€šè¿‡ `@apply` æŒ‡ä»¤ï¼Œå¯ä»¥å°†å¤šä¸ªåŸå­ç±»ç»„åˆåº”ç”¨äºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œæå‡æ ·å¼çš„å¤ç”¨æ€§å’Œå¯è¯»æ€§ã€‚

## SCSS å…¨å±€å˜é‡

> [!quote]
> [css. preprocessorOptions[extension]. additionalData \| å…±äº«é€‰é¡¹ \| Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://cn.vite.dev/config/shared-options.html#css-preprocessoroptions)

è¯¥é€‰é¡¹å…è®¸ä¸ºæ¯ä¸ªæ ·å¼æ–‡ä»¶ä¸­è‡ªåŠ¨æ³¨å…¥ SCSS å˜é‡ã€å‡½æ•°æˆ–æ··å…¥ç­‰å†…å®¹ã€‚

> [!note]
> è‹¥æ³¨å…¥çš„æ˜¯å®é™…æ ·å¼å†…å®¹è€Œéå˜é‡ï¼Œå¯èƒ½ä¼šåœ¨æ„å»ºäº§ç‰©ä¸­**é‡å¤å‡ºç°**ï¼Œåº”é¿å…ã€‚

> [!info]- å‰ç½®çŸ¥è¯†
> [[#SCSS æ¨¡å—å¼•å…¥æ–¹å¼]] & [[#SCSS ä¸ CSS å˜é‡]]

### åˆ›å»ºå…¨å±€å˜é‡æ–‡ä»¶ `variables.scss`

```scss hl:1-3
$sidebarWidth: 210px;
$navbarHeight: 50px;
$tagsViewHeight: 34px;
```

### é…ç½® Vite è‡ªåŠ¨æ³¨å…¥å˜é‡

```ts hl:5-12
import { defineConfig } from 'vite'

// https://vite.dev/config/
export default defineConfig({
  css: {
    preprocessorOptions: {
      scss: {
        // è‡ªåŠ¨æ³¨å…¥å˜é‡ï¼Œæ— éœ€åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­å•ç‹¬å¼•å…¥
        additionalData: `@use "@/styles/variables.scss" as *;`,
      },
    },
  },
})
```

### ç”Ÿæˆ CSS åŸç”Ÿå˜é‡

```scss file:src/styles/index.scss hl:1-5
:root {
  --sidebar-width: #{$sidebarWidth};
  --navbar-height: #{$navbarHeight};
  --tags-view-height: #{$tagsViewHeight};
}
```

å¹¶åœ¨å…¥å£æ–‡ä»¶ `main.ts` å¼•å…¥è¯¥æ–‡ä»¶ï¼š

```ts
import '@/styles/index.scss'
```

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ CSS å˜é‡

```vue hl:20,26,29,33
<template>
<div class="app-wrapper">
  <div class="sidebar-container">ä¾§è¾¹å¯¼èˆªæ </div>
  <div class="main-wrapper">
    <div class="header-container">
      <div class="navbar">é¡¶éƒ¨å¯¼èˆªæ </div>
      <div class="tags-view">æ ‡ç­¾å¯¼èˆªæ </div>
  </div>
    <div class="content-container">
      <router-view></router-view>
  </div>
  </div>
  </div>
</template>

<style lang="scss" scoped>
  .app-wrapper {
    @apply flex w-screen h-screen;
    .sidebar-container {
      @apply w-[var(--sidebar-width)] bg-red-300;
    }
    .main-wrapper {
      @apply flex flex-col flex-1;
      .header-container {
        .navbar {
          @apply h-[var(--navbar-height)] bg-yellow-300;
        }
        .tags-view {
          @apply h-[var(--tags-view-height)] bg-blue-300;
        }
      }
      .content-container {
        @apply h-[calc(100vh-var(--navbar-height)-var(--tags-view-height))] bg-gray-100;
      }
    }
  }
</style>
```

---

ä»¥ä¸Šæ–¹æ¡ˆæ˜¯ç›®å‰ **åœ¨ä½¿ç”¨ Vite + SCSS + UnoCSS é¡¹ç›®ä¸­ç®¡ç†å…¨å±€æ ·å¼å˜é‡çš„æœ€ä½³å®è·µä¹‹ä¸€**ï¼Œå…·æœ‰ä»¥ä¸‹å‡ ä¸ªå…³é”®ä¼˜åŠ¿ï¼š

| æ–¹é¢         | ä¼˜åŠ¿è¯´æ˜                                           |
| ---------- | ---------------------------------------------- |
| **è‡ªåŠ¨æ³¨å…¥å˜é‡** | ä½¿ç”¨ `vite.config.ts` é…ç½® `additionalData`ï¼Œé¿å…é‡å¤å¼•å…¥ |
| **æ¨¡å—åŒ–å¼•å…¥**  | ä½¿ç”¨ `@use` ä»£æ›¿æ—§å¼ `@import`ï¼Œé˜²æ­¢å…¨å±€æ±¡æŸ“å’Œé‡å¤ç¼–è¯‘           |
| **åŸç”Ÿå˜é‡è¾“å‡º** | SCSS ç¼–è¯‘æœŸå˜é‡è½¬æ¢ä¸º CSS è¿è¡Œæ—¶å˜é‡ï¼Œå…¼å®¹ JSã€HTMLã€UnoCSS ç­‰ç¯å¢ƒ  |
| **åŠ¨æ€å“åº”èƒ½åŠ›** | å¯é€šè¿‡ JavaScript ä¿®æ”¹ CSS å˜é‡å€¼ï¼Œæ”¯æŒå“åº”å¼å¸ƒå±€ã€ä¸»é¢˜åˆ‡æ¢ç­‰åœºæ™¯      |
| **åŸå­ç±»å…¼å®¹æ€§** | UnoCSS æ”¯æŒ `w-[var (--xxx)]` å½¢å¼ï¼Œå®Œç¾ç»“åˆåŠ¨æ€æ ·å¼         |
| **æ ·å¼åˆ†ç¦»æ¸…æ™°** | æ ·å¼ã€å˜é‡ã€é€»è¾‘èŒè´£æ˜ç¡®ï¼Œä¾¿äºç»´æŠ¤å’Œå¤šäººåä½œå¼€å‘                       |

> [!warning] æ³¨æ„äº‹é¡¹
> - ä¸å»ºè®®åœ¨ `additionalData` ä¸­æ³¨å…¥æ ·å¼å†…å®¹ï¼ˆå¦‚ class ç­‰ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´**é‡å¤æ¸²æŸ“å’Œæ ·å¼æ±¡æŸ“**ã€‚
> - CSS åŸç”Ÿå˜é‡å»ºè®®å†™åœ¨ `:root` æˆ–é¡µé¢çº§å®¹å™¨ä¸­ï¼Œç¡®ä¿ä½œç”¨åŸŸæ¸…æ™°ã€‚
> - **UnoCSS ä¸æ”¯æŒ SCSS ç¼–è¯‘æœŸå˜é‡**ï¼ˆå¦‚ `$xx`ï¼‰ï¼Œå¿…é¡»è½¬ä¸º `var (--xx)` åé…åˆåŸå­ç±»ä½¿ç”¨ã€‚

## Normalize.css é›†æˆ

[**Normalize.css**](https://necolas.github.io/normalize.css/) æ˜¯ä¸€ç§ç°ä»£ CSS é‡ç½®æ–¹æ¡ˆï¼Œæ—¨åœ¨ç»Ÿä¸€ä¸åŒæµè§ˆå™¨å¯¹ HTML å…ƒç´ çš„é»˜è®¤æ ·å¼æ¸²æŸ“ï¼Œå¹¶ç¬¦åˆå½“ä»£æ ‡å‡†ã€‚

ç›¸è¾ƒäºä¼ ç»Ÿçš„ CSS Resetï¼ŒNormalize.css å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- **ä¿ç•™æœ‰ä»·å€¼çš„é»˜è®¤æ ·å¼**ï¼šä¸ä¼šç›²ç›®æ¸…é™¤æ‰€æœ‰æµè§ˆå™¨é»˜è®¤æ ·å¼ï¼Œé¿å…é‡å¤å®šä¹‰åŸºç¡€æ ·å¼ã€‚
- **ç»Ÿä¸€ä¸åŒæµè§ˆå™¨çš„è¡¨ç°**ï¼šå¯¹å¤šç§ HTML å…ƒç´ è¿›è¡Œè§„èŒƒåŒ–ï¼Œç¡®ä¿è·¨æµè§ˆå™¨çš„ä¸€è‡´æ€§ã€‚
- **ä¿®å¤å·²çŸ¥å…¼å®¹æ€§é—®é¢˜**ï¼šè§£å†³æµè§ˆå™¨é—´å·²çŸ¥çš„æ ·å¼ bug å’Œä¸ä¸€è‡´è¡Œä¸ºã€‚
- **å¾®è°ƒæå‡å¯ç”¨æ€§**ï¼šå¯¹éƒ¨åˆ†å…ƒç´ è¿›è¡Œç»†è‡´ä¼˜åŒ–ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚
- **ä»£ç æ³¨é‡Šè¯¦å°½**ï¼šå†…å«ä¸°å¯Œæ³¨é‡Šï¼Œä¾¿äºç†è§£æ¯é¡¹è§„èŒƒçš„ç›®çš„ã€‚

å¼•å…¥ Normalize.css å¯ä¸ºé¡¹ç›®å»ºç«‹ä¸€è‡´ã€å¯é çš„æ ·å¼åŸºç¡€ï¼Œå‡å°‘æµè§ˆå™¨å·®å¼‚å¸¦æ¥çš„é—®é¢˜ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚

### å®‰è£…

```bash
pnpm install normalize.css
```

### å¼•å…¥

```scss file:src/styles/index.scss
@use 'normalize.css/normalize.css';
```

## å›¾æ ‡é›†æˆæ–¹æ¡ˆ

### iconify å›¾æ ‡åº“é›†æˆ

å€ŸåŠ© [[Vite#unplugin-icons|unplugin-icons]] é…åˆ [[Vite#unplugin-auto-import|unplugin-auto-import]] ä¸ [[Vite#unplugin-vue-components|unplugin-vue-components]] æ’ä»¶ï¼Œå¯å®ç° [Iconify](https://iconify.design/) å›¾æ ‡çš„è‡ªåŠ¨å¯¼å…¥ä¸ç»„ä»¶æ³¨å†Œã€‚

#### å®‰è£…æ’ä»¶

```bash
pnpm install -D unplugin-icons unplugin-auto-import unplugin-vue-components
```

#### é…ç½® `vite.config.ts`

å®ç° ElementPlus å›¾æ ‡çš„è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ä¸ç»„ä»¶è‡ªåŠ¨æ³¨å†Œï¼Œæ‚¨å¯ä»¥å‚è€ƒ[æ­¤æ¨¡æ¿](https://github.com/sxzz/element-plus-best-practices/blob/db2dfc983ccda5570033a0ac608a1bd9d9a7f658/vite.config.ts#L21-L58)ã€‚

```ts hl:4-5,14,20-30,33-36
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import IconsResolver from 'unplugin-icons/resolver'
import Icons from 'unplugin-icons/vite'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    AutoImport({
      // è‡ªå®šä¹‰è§£æå™¨
      resolvers: [
        // è‡ªåŠ¨å¯¼å…¥å›¾æ ‡ç»„ä»¶
        IconsResolver(),
      ],
    }),
    Components({
      resolvers: [
        // è‡ªåŠ¨æ³¨å†Œå›¾æ ‡ç»„ä»¶
        IconsResolver({
          // é™å®šå¯ç”¨æŒ‡å®šå›¾æ ‡é›†ï¼ˆå¯é€‰ï¼‰
          // è‹¥å¯ç”¨å¤šä¸ªå›¾æ ‡é›†ï¼Œå¯è®¾ç½®ä¸º ['ep', 'mdi', 'tabler'] ç­‰
          // ä¸æŒ‡å®šæ—¶é»˜è®¤å¯ç”¨æ‰€æœ‰å·²å®‰è£…å›¾æ ‡é›†
          enabledCollections: ['ep'],
          // è‡ªå®šä¹‰å‰ç¼€ï¼Œé»˜è®¤å‰ç¼€ä¸º 'i'ï¼Œå¯é€šè¿‡è®¾ç½®ä¸º false | '' æ¥ç¦ç”¨å‰ç¼€
Â  Â  Â  Â  Â  // ä¾‹å¦‚ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾æ ‡ç»„ä»¶åç§°ä¸º <IEpAddLocation />
Â  Â  Â  Â  Â  // ä¾‹å¦‚ï¼šè®¾ç½®ä¸º 'Icon'ï¼Œåˆ™å›¾æ ‡ç»„ä»¶åç§°å°†å˜ä¸º <IconEpAddLocation />
Â  Â  Â  Â  Â  // ä¾‹å¦‚ï¼šè®¾ç½®ä¸º falseï¼Œåˆ™å›¾æ ‡ç»„ä»¶åç§°å°†å˜ä¸º <EpAddLocation />
Â  Â  Â  Â  Â  // prefix: 'Icon',
        }),
      ],
    }),
    Icons({
      // å¯ç”¨å›¾æ ‡é›†è‡ªåŠ¨å®‰è£…
      autoInstall: true,
    }),
  ],
})
```

#### ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <div class="mb-4">
    <IEpAddLocation />
    <IEpMapLocation h-48px w-48px text-red />
    <IEpSetting text-5xl text-cyan />
  </div>
</template>
```

### æœ¬åœ° SVG å›¾æ ‡é›†æˆ

å¯¹äºéœ€è¦é›†æˆæœ¬åœ°è‡ªå®šä¹‰å›¾æ ‡çš„å›¢é˜Ÿï¼ˆå¦‚é…åˆè®¾è®¡å¸ˆå·¥ä½œï¼‰ï¼Œæ¨èä½¿ç”¨ [vite-plugin-svg-icons](https://github.com/vbenjs/vite-plugin-svg-icons) æ’ä»¶ï¼Œå®ç°æœ¬åœ° SVG å›¾æ ‡çš„é«˜æ•ˆåŠ è½½ä¸ç»Ÿä¸€ç®¡ç†ã€‚

#### å®‰è£…æ’ä»¶

```bash
pnpm install -D vite-plugin-svg-icons
```

#### é…ç½® `vite.config.ts`

```ts hl:2-3,8-17
import { defineConfig } from 'vite'
import path from 'node:path'
import { createSvgIconsPlugin } from 'vite-plugin-svg-icons'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    createSvgIconsPlugin({
      // æŒ‡å®šå›¾æ ‡æ–‡ä»¶ç›®å½•
      iconDirs: [path.resolve(process.cwd(), 'src/assets/icons')],
      // å®šä¹‰ç”Ÿæˆçš„ symbol ID æ ¼å¼ï¼šé»˜è®¤å€¼ä¸º icon-[dir]-[name]
      // - [prefix] è¡¨ç¤ºå›¾æ ‡å‰ç¼€
      // - [dir] è¡¨ç¤ºå›¾æ ‡æ‰€åœ¨å­ç›®å½•åç§°
      // - [name] è¡¨ç¤ºå›¾æ ‡æ–‡ä»¶å
      // æœ€ç»ˆç”Ÿæˆçš„ ID å½¢å¦‚ï¼šicon-user æˆ– icon-folder-user
      symbolId: 'icon-[dir]-[name]',
    }),
  ],
})
```

##### æ’ä»¶é€‰é¡¹è¯´æ˜

| å‚æ•°            | ç±»å‹                       | é»˜è®¤å€¼                   | è¯´æ˜                                                    |
| ------------- | ------------------------ | --------------------- | ----------------------------------------------------- |
| `iconDirs`    | `string[]`               | -                     | æŒ‡å®š SVG å›¾æ ‡æ‰€åœ¨ç›®å½•ï¼Œæ”¯æŒé€’å½’æ”¶é›†æ‰€æœ‰ SVG æ–‡ä»¶                         |
| `symbolId`    | `string`                 | `icon-[dir]-[name]`   | ç”Ÿæˆå›¾æ ‡çš„ symbol ID æ ¼å¼ï¼Œæ”¯æŒå ä½ç¬¦ `[dir]`ï¼ˆç›®å½•ï¼‰å’Œ `[name]`ï¼ˆæ–‡ä»¶åï¼‰   |
| `svgoOptions` | `boolean \| SvgoOptions` | `true`                | svg å‹ç¼©é…ç½®ï¼Œå¯ä»¥æ˜¯å¯¹è±¡ [SVGO é…ç½®](https://github.com/svg/svgo) |
| `inject`      | `string`                 | `body-last`           | æŒ‡å®š svgDom çš„æ’å…¥ä½ç½®ï¼š`body-first` æˆ– `body-last`            |
| `customDomId` | `string`                 | `__svg__icons__dom__` | svgDom æ’å…¥èŠ‚ç‚¹çš„ ID                                       |

symbolId å‘½åè§„åˆ™ï¼š`icon-[dir]-[name]`
- `[dir]`ï¼šå­ç›®å½•åç§°ï¼ˆç”¨äºåŒºåˆ†ä¸åŒæ–‡ä»¶å¤¹ä¸‹çš„åŒåå›¾æ ‡ï¼‰
- `[name]`ï¼šSVG æ–‡ä»¶å

```
src/assets/icons
â”œâ”€â”€ icon1.svg              â†’ icon-icon1
â”œâ”€â”€ icon2.svg              â†’ icon-icon2
â”œâ”€â”€ icon3.svg              â†’ icon-icon3
â”œâ”€â”€ dir/
â”‚   â””â”€â”€ icon1.svg          â†’ icon-dir-icon1
â””â”€â”€ dir/dir2/
    â””â”€â”€ icon1.svg          â†’ icon-dir-dir2-icon1
```

#### å£°æ˜è™šæ‹Ÿæ¨¡å—

> [!note]
> **å¿…é¡»æ‰§è¡Œæ­¤æ­¥éª¤**ï¼Œå¦åˆ™åœ¨ `main.ts` ä¸­å¼•å…¥ `virtual: svg-icons-register` æ—¶ä¼šæŠ¥é”™ï¼šæ‰¾ä¸åˆ°æ¨¡å— `"virtual: svg-icons-register"` æˆ–å…¶ç›¸åº”ç±»å‹å£°æ˜ã€‚
> è¯¦è§ï¼š[vite-plugin-svg-icons#116](https://github.com/vbenjs/vite-plugin-svg-icons/issues/116)

> [!info]
> ä»¥ä¸‹å†…å®¹å‚è€ƒè‡ª `node_modules/vite-plugin-svg-icons/client.d.ts` ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œæ‰‹åŠ¨æ·»åŠ è‡³é¡¹ç›®ä»¥é€šè¿‡ç±»å‹æ£€æŸ¥ã€‚

```ts file:vite-env.d.ts hl:3-15
/// <reference types="vite/client" />

// å£°æ˜ vite-plugin-svg-icons æä¾›çš„è™šæ‹Ÿæ¨¡å—ï¼šç”¨äºè‡ªåŠ¨æ³¨å†Œ SVG å›¾æ ‡
declare module 'virtual:svg-icons-register' {
  // eslint-disable-next-line
  const component: any
  export default component
}

// å£°æ˜å›¾æ ‡åç§°æ•°ç»„æ¨¡å—ï¼šè¿”å›æ‰€æœ‰å·²æ³¨å†Œçš„å›¾æ ‡åç§°ï¼Œé€‚ç”¨äºå›¾æ ‡é€‰æ‹©å™¨ã€é¢„è§ˆç­‰åŠŸèƒ½
declare module 'virtual:svg-icons-names' {
  // eslint-disable-next-line
  const iconsNames: string[]
  export default iconsNames
}
```

- `/// <reference types="vite/client" />`
	- å¼•å…¥ Vite çš„å®¢æˆ·ç«¯ç±»å‹å£°æ˜ï¼Œæ”¯æŒå¦‚ `import.meta.env` ç­‰ç‰¹æ€§ï¼Œæ˜¯ Vite é¡¹ç›®çš„æ ‡å‡†é…ç½®ã€‚
- `declare module 'virtual: svg-icons-register'`
    - å£°æ˜è¯¥è™šæ‹Ÿæ¨¡å—ç”¨äºè‡ªåŠ¨å°†æ‰€æœ‰ SVG å›¾æ ‡æ³¨å†Œä¸º `<symbol>` æ³¨å…¥åˆ°é¡µé¢ `<body>` ä¸­ï¼Œä½¿ `<use xlink:href="#icon-name" />` ç”Ÿæ•ˆã€‚
    - ä½¿ç”¨æ–¹å¼è§ï¼š[[#å¼•å…¥æ³¨å†Œè„šæœ¬]]
- `declare module 'virtual: svg-icons-names'`
	- å£°æ˜å›¾æ ‡åç§°æ•°ç»„æ¨¡å—ï¼Œå¯¼å‡ºä¸€ä¸ª `string[]` ç±»å‹æ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å·²æ”¶é›† SVG å›¾æ ‡çš„å®Œæ•´ IDï¼ˆå¦‚ `icon-user`, `icon-folder-file`ï¼‰ã€‚
	- é€‚ç”¨äºæ„å»ºå›¾æ ‡é€‰æ‹©å™¨ã€å›¾æ ‡é¢„è§ˆé¢æ¿ç­‰åœºæ™¯ã€‚
	- ä½¿ç”¨ç¤ºä¾‹ï¼š

		```ts
		import iconNames from 'virtual:svg-icons-names'
		
		iconNames.forEach(name => {
		  console.log(name) // è¾“å‡º icon-userã€icon-home ç­‰
		})
		```

#### å¼•å…¥æ³¨å†Œè„šæœ¬

åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ `main.ts` ä¸­å¼•å…¥ï¼š

```ts
import 'virtual: svg-icons-register'
```

#### å°è£… SVG å›¾æ ‡ç»„ä»¶

ä¸ºç»Ÿä¸€ä½¿ç”¨æ–¹å¼ï¼Œå»ºè®®å°è£…ä¸€ä¸ªé€šç”¨ SVG å›¾æ ‡ç»„ä»¶ã€‚

```vue
<template>
  <svg class="svg-icon" v-bind="$attrs" aria-hidden="true">
    <use :xlink:href="`#${symbolId}`" />
  </svg>
</template>

<script setup lang="ts">
const { prefix = 'icon', iconName } = defineProps<{
  prefix?: string
  iconName: string
}>()

const symbolId = computed (() => (iconName.startsWith (prefix) ? iconName : `${prefix}-${iconName}`))
</script>

<style lang="scss" scoped>
.svg-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  vertical-align: -0.15em; /* å›  icon å¤§å°è¢«è®¾ç½®ä¸ºå’Œå­—ä½“å¤§å°ä¸€è‡´ï¼Œè€Œ span ç­‰æ ‡ç­¾çš„ä¸‹è¾¹ç¼˜ä¼šå’Œå­—ä½“çš„åŸºçº¿å¯¹é½ï¼Œæ•…éœ€è®¾ç½®ä¸€ä¸ªå¾€ä¸‹çš„åç§»æ¯”ä¾‹ï¼Œæ¥çº æ­£è§†è§‰ä¸Šçš„æœªå¯¹é½æ•ˆæœ */
  outline: none;
  overflow: hidden;
  fill: currentColor; /* å®šä¹‰å…ƒç´ çš„é¢œè‰²ï¼ŒcurrentColor æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å€¼å°±è¡¨ç¤ºå½“å‰å…ƒç´ çš„ color å€¼ï¼Œå¦‚æœå½“å‰å…ƒç´ æœªè®¾ç½® color å€¼ï¼Œåˆ™ä»çˆ¶å…ƒç´ ç»§æ‰¿ */
}
</style>
```

#### ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <svg-icon
    v-for="iconName in iconNames"
    :key="iconName"
    : icon-name="iconName"
    text-5xl
    text-purple
  ></svg-icon>
</template>

<script setup lang="ts">
import iconNames from 'virtual: svg-icons-names'
</script>
```

## VueUse é›†æˆ

[VueUse](https://vueuse.org/) æ˜¯ä¸€ç»„åŸºäº Vue Composition API çš„å®ç”¨å·¥å…·å‡½æ•°é›†åˆã€‚åœ¨ç»§ç»­ä½¿ç”¨å‰ï¼Œè¯·ç¡®ä¿ä½ å·²æŒæ¡ [Composition API](https://cn.vuejs.org/guide/extras/composition-api-faq) çš„åŸºæœ¬æ¦‚å¿µã€‚

### å®‰è£…

```bash
pnpm install @vueuse/core
```

### é…ç½®è‡ªåŠ¨å¯¼å…¥

å€ŸåŠ© [[Vite#unplugin-auto-import|unplugin-auto-import]] æ’ä»¶å¯å®ç°è‡ªåŠ¨å¯¼å…¥ VueUse ä¸­çš„å¸¸ç”¨å‡½æ•°ï¼ˆå¦‚ `useStorage`ã€`useTitle` ç­‰ï¼‰ã€‚

```ts file: vite. config. ts hl:13
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'

// https://vite.dev/config/
export default defineConfig ({
  plugins: [
    AutoImport ({
      // è‡ªåŠ¨å¯¼å…¥ Vue ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šref, reactive, toRef ç­‰
      // è‡ªåŠ¨å¯¼å…¥ VueRouter ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šuseRouter ç­‰
      // è‡ªåŠ¨å¯¼å…¥ Pinia ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šcreatePiniaï¼ŒdefineStoreï¼ŒstoreToRefs ç­‰
      // è‡ªåŠ¨å¯¼å…¥ @vueuse/core ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šuseStorageã€useTitle ç­‰
      // å‚è€ƒè‡ªï¼š https://github.com/sxzz/element-plus-best-practices/blob/main/vite.config.ts
      imports: ['vue', 'vue-router', 'pinia', '@vueuse/core'],
    }),
})
```

### ä½¿ç”¨ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»“åˆ [Pinia](https://pinia.vuejs.org/zh/) çŠ¶æ€ç®¡ç†å’Œ [VueUse](https://vueuse.org/) çš„ [`useStorage()`](https://vueuse.org/core/useStorage/) å·¥å…·å‡½æ•°çš„è®¡æ•°å™¨ç¤ºä¾‹ã€‚é€šè¿‡ `useStorage` å¯å°†çŠ¶æ€åŒæ­¥è‡³ `localStorage`ï¼Œå®ç°æœ¬åœ°æŒä¹…åŒ–ï¼Œé¡µé¢åˆ·æ–°åä¾ç„¶ä¿ç•™è®¡æ•°å€¼ã€‚

```ts file: src/stores/counter. ts hl:2
export const useCounterStore = defineStore ('counter', () => {
  const count = useStorage ('count', 0)

  const increment = () => {
    count. value++
  }

  const decrement = () => {
    count. value--
  }
  return { count, increment, decrement }
})
```

```vue hl: 3,10
<template>
  <div class="mb-4">
    <el-input-number v-model="count" :min="1" :max="10" @change="handleChange" />
  </div>
</template>

<script setup lang="ts">
import { useCounterStore } from '@/stores/counter'

const { count } = storeToRefs (useCounterStore ())
const handleChange = (value: number | undefined) => {
  count. value = value
}
</script>
```

## æš—é»‘æ¨¡å¼æ”¯æŒ

### Element Plus æš—é»‘æ¨¡å¼

> [!quote]
> å®˜æ–¹æ–‡æ¡£ï¼š
> - ğŸ‘‰ [ä¸»é¢˜ | Element Plus](https://element-plus.org/zh-CN/guide/theming.html)
> - ğŸ‘‰ [æš—é»‘æ¨¡å¼ | Element Plus](https://element-plus.org/zh-CN/guide/dark-mode.html)

#### å¦‚ä½•å¯ç”¨ï¼Ÿ

å¯ç”¨éå¸¸ç®€å•ï¼Œåªéœ€åœ¨ HTML æ ¹èŠ‚ç‚¹ä¸Šæ·»åŠ  `.dark` ç±»åå³å¯ï¼š

```html
<html class="dark">
  <head></head>
  <body></body>
</html>
```

å¦‚æœå¸Œæœ›**åŠ¨æ€åˆ‡æ¢æ˜æš—æ¨¡å¼**ï¼Œæ¨èä½¿ç”¨ VueUse æä¾›çš„ [useDark](https://vueuse.org/core/useDark/) å®ç°å“åº”å¼æ§åˆ¶ã€‚

#### é€šè¿‡ SCSS å˜é‡

> [!warning]
> ElementPlus æš—é»‘æ¨¡å¼ä¸‹éƒ¨åˆ†ä¸»é¢˜å˜é‡ï¼ˆå¦‚ `$menu`ï¼‰ç›®å‰ä»æ— æ³•é€šè¿‡ SCSS å˜é‡æ­£ç¡®è¦†ç›–ï¼Œè¯¦è§å®˜æ–¹ Issueï¼š[#9076](https://github.com/element-plus/element-plus/issues/9076)ã€‚å› æ­¤ï¼Œå»ºè®®[[#é€šè¿‡ CSS å˜é‡ï¼ˆæ¨èï¼‰]] æ›¿ä»£ã€‚

##### æ¨èç›®å½•ç»“æ„

```bash
src/
â””â”€â”€ styles/
    â”œâ”€â”€ element/
    â”‚   â”œâ”€â”€ light. scss        # æ˜äº®ä¸»é¢˜å˜é‡ï¼ˆSCSS å˜é‡è¦†ç›–ï¼‰
    â”‚   â”œâ”€â”€ dark. scss         # æš—é»‘ä¸»é¢˜å˜é‡ï¼ˆCSS å˜é‡è¦†ç›–ï¼‰
    â”‚   â””â”€â”€ index. scss        # æ±‡æ€»ç»Ÿä¸€å¯¼å‡º
    â””â”€â”€ index. scss            # å…¨å±€æ ·å¼å…¥å£ï¼ˆå¼•å…¥ ElementPlus Dark CSS å˜é‡ï¼‰
```

> [!note]
> `light.scss` ä¸ `dark.scss` **å¿…é¡»åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ–‡ä»¶**ï¼Œå› ä¸º Sass **ä¸å…è®¸åœ¨åŒä¸€æ–‡ä»¶ä¸­å¤šæ¬¡ `@forward` ç›¸åŒå˜é‡åï¼ˆå¦‚ `$colors`ï¼‰**ï¼Œå¦åˆ™å°†å¯¼è‡´å˜é‡åå†²çªå’Œæ„å»ºå¤±è´¥ã€‚

##### æ˜äº®æ¨¡å¼å˜é‡ï¼ˆ`light.scss`ï¼‰

```scss file: src/styles/element/light. scss
/* just override what you need */
@forward 'element-plus/theme-chalk/src/common/var. scss' with (
  $colors: (
    'primary': (
      'base': #ff4c20 ,
    ),
  )
);
```

##### æš—é»‘æ¨¡å¼å˜é‡ï¼ˆ`dark.scss`ï¼‰

```scss file: src/styles/element/dark. scss
/* just override what you need */
@forward 'element-plus/theme-chalk/src/dark/var. scss' with (
  $colors: (
    'primary': (
      'base': #67c23a ,
    ),
  )
);
```

##### å˜é‡æ±‡æ€»å…¥å£ï¼ˆ`index.scss`ï¼‰

```scss file: src/styles/element/index. scss
@use './light. scss' as *;
@use './dark. scss' as *;
```

##### å…¨å±€æ ·å¼å…¥å£ï¼ˆå¼•å…¥æš—é»‘æ¨¡å¼ CSS å˜é‡ï¼‰

```scss file: src/styles/index. scss
@use 'element-plus/theme-chalk/src/dark/css-vars. scss';
```

> [!important]
> åœ¨å…¥å£æ–‡ä»¶ `main.ts` ä¸­å¼•å…¥ `src/styles/index.scss`ï¼Œä»¥åŠ è½½å˜é‡å®šä¹‰å’Œæš—é»‘æ ·å¼ã€‚

##### Vite é…ç½®ï¼šå¯ç”¨ Sass æ”¯æŒ & è‡ªåŠ¨æ³¨å…¥å˜é‡

```ts file: vite. config. ts hl: 14,21,25-32
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

// https://vite.dev/config/
export default defineConfig ({
  plugins: [
    AutoImport ({
      // è‡ªå®šä¹‰è§£æå™¨
      resolvers: [
        // è‡ªåŠ¨å¯¼å…¥ Element Plus ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šElMessage, ElMessageBox... (å¸¦æ ·å¼)
        // é‡‡ç”¨ SaSS æºæ–‡ä»¶çš„æ–¹å¼å¼•å…¥ç»„ä»¶æ ·å¼ï¼Œä»¥ä¾¿é€šè¿‡ SCSS å˜é‡è¦†ç›–å®ç°ä¸»é¢˜å®šåˆ¶
        ElementPlusResolver ({ importStyle: 'sass' }),
      ],
    }),
    Components ({
      resolvers: [
        // è‡ªåŠ¨æ³¨å†Œ Element Plus ç»„ä»¶
        // é‡‡ç”¨ SaSS æºæ–‡ä»¶çš„æ–¹å¼å¼•å…¥ç»„ä»¶æ ·å¼ï¼Œä»¥ä¾¿é€šè¿‡ SCSS å˜é‡è¦†ç›–å®ç°ä¸»é¢˜å®šåˆ¶
        ElementPlusResolver ({ importStyle: 'sass' }),
      ],
    }),
  ],
  css: {
    preprocessorOptions: {
      scss: {
        // è‡ªåŠ¨æ³¨å…¥å˜é‡ï¼Œæ— éœ€åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­å•ç‹¬å¼•å…¥
        additionalData: `@use "@/styles/element/index. scss" as *;`,
      },
    },
  },
})
```

#### é€šè¿‡ CSS å˜é‡ï¼ˆæ¨èï¼‰

- [ ] TODO

### UnoCSS æš—é»‘æ¨¡å¼

æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ [[#Wind3 é¢„è®¾ (æ¨è)|Wind3 é¢„è®¾]]ï¼Œè¯¥é¢„è®¾é»˜è®¤å¯ç”¨[åŸºäºç±»åçš„æš—é»‘æ¨¡å¼](https://unocss.nodejs.cn/presets/wind3#dark-mode)ã€‚åªéœ€åœ¨åŸå­ç±»å‰åŠ ä¸Š `dark:` å‰ç¼€ï¼Œå³å¯å®šä¹‰æš—é»‘æ ·å¼ï¼š

```html
<div class="dark:bg-red:10" />
```

ç¼–è¯‘åå°†è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ CSSï¼š

```css
.dark .dark\: bg-red\: 10 {
  background-color: rgb (248 113 113 / 0.1);
}
```

### åŠ¨æ€åˆ‡æ¢æ˜æš—æ¨¡å¼

å€ŸåŠ© VueUse æä¾›çš„ [`useColorMode`](https://vueuse.org/core/useColorMode/) å’Œ [`usePreferredDark`](https://vueuse.org/core/usePreferredDark/)ï¼Œå¯ä»¥è½»æ¾å®ç°å“åº”ç³»ç»Ÿä¸»é¢˜ã€æ”¯æŒæ‰‹åŠ¨åˆ‡æ¢çš„æ˜æš—æ¨¡å¼ï¼š

```vue hl: 13-14,17-22,25,27-31
<template>
  <el-icon class="cursor-pointer" @click="toggle">
    <template v-if="mode === 'dark'">
      <i-ep-moon />
    </template>
    <template v-else-if="mode === 'light'">
      <i-ep-sunny />
    </template>
  </el-icon>
</template>

<script setup lang="ts">
const mode = useColorMode ()
const isSystemDark = usePreferredDark ()

// è‹¥å½“å‰æ¨¡å¼ä¸ç³»ç»Ÿä¸»é¢˜ä¸€è‡´ï¼Œåˆ™å›é€€ä¸ºè‡ªåŠ¨æ¨¡å¼ï¼ˆ'auto'ï¼‰ï¼Œä»¥ä¾¿åç»­ç»§ç»­è·Ÿéšç³»ç»Ÿ
const maybeResetMode = () => {
  const matchesSystem = mode. value === (isSystemDark. value ? 'dark' : 'light')
  if (matchesSystem) {
    mode. value = 'auto'
  }
}

// å½“ç³»ç»Ÿä¸»é¢˜å˜åŒ–æ—¶ï¼Œå°è¯•å›é€€ä¸ºè‡ªåŠ¨æ¨¡å¼
watch (isSystemDark, maybeResetMode)

const toggle = async () => {
  mode. value = mode. value === 'dark' ? 'light' : 'dark'
  await nextTick ()
  maybeResetMode ()
}
</script>
```

### ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»

> [!quote] æ¨èå‚è€ƒ
> - [View Transition API å®ç°ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»æ•ˆæœ](https://www.bilibili.com/video/BV18x4y187op?vd_source=84272a2d7f72158b38778819be5bc6ad)
> - [Bç«™å®¢æˆ·ç«¯åˆ‡æ¢æš—é»‘æ¨¡å¼æ•ˆæœè¿˜åŸ](https://www.bilibili.com/video/BV1iJ4m1T7CA?vd_source=84272a2d7f72158b38778819be5bc6ad)

é€šè¿‡åŸç”Ÿ [View Transition API](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API) å¯ä»¥ä¸ºä¸»é¢˜åˆ‡æ¢æ·»åŠ ç‚¹å‡»æ‰©æ•£åŠ¨ç”»ï¼Œè®©ä½“éªŒæ›´è‡ªç„¶ï¼š

```vue hl: 27-52
<template>
  <el-icon class="cursor-pointer" @click="toggle">
    <template v-if="mode === 'dark'">
      <i-ep-moon />
    </template>
    <template v-else-if="mode === 'light'">
      <i-ep-sunny />
    </template>
  </el-icon>
</template>

<script setup lang="ts">
const mode = useColorMode ()
const isSystemDark = usePreferredDark ()

// è‹¥å½“å‰æ¨¡å¼ä¸ç³»ç»Ÿä¸»é¢˜ä¸€è‡´ï¼Œåˆ™å›é€€ä¸ºè‡ªåŠ¨æ¨¡å¼ï¼ˆ'auto'ï¼‰ï¼Œä»¥ä¾¿åç»­ç»§ç»­è·Ÿéšç³»ç»Ÿ
const maybeResetMode = () => {
  const matchesSystem = mode. value === (isSystemDark. value ? 'dark' : 'light')
  if (matchesSystem) {
    mode. value = 'auto'
  }
}

// å½“ç³»ç»Ÿä¸»é¢˜å˜åŒ–æ—¶ï¼Œå°è¯•å›é€€ä¸ºè‡ªåŠ¨æ¨¡å¼
watch (isSystemDark, maybeResetMode)

const toggle = (event: MouseEvent) => {
  const x = event. clientX
  const y = event. clientY
  const endRadius = Math.hypot (Math.max (x, innerWidth - x), Math.max (y, innerHeight - y))
  const transition = document.startViewTransition (async () => {
    // æ‰‹åŠ¨åˆ‡æ¢ä¸»é¢˜ï¼Œæš‚æ—¶ä¸­æ–­ç³»ç»Ÿè·Ÿéš
    mode. value = mode. value === 'dark' ? 'light' : 'dark'
    await nextTick ()
    // å¦‚æœå½“å‰ä¸»é¢˜åˆ‡æ¢åä¸ç³»ç»Ÿä¸€è‡´ï¼Œåˆ™æ¢å¤ä¸ºè‡ªåŠ¨æ¨¡å¼
    maybeResetMode ()
  })
  transition.ready.then (() => {
    const isDark = mode. value === 'dark'
    const clipPath = [`circle (0px at ${x}px ${y}px)`, `circle (${endRadius}px at ${x}px ${y}px)`]
    document.documentElement.animate (
      {
        clipPath: isDark ? [... clipPath]. reverse () : clipPath,
      },
      {
        duration: 400,
        easing: 'ease-out',
        pseudoElement: isDark ? ':: view-transition-old (root)' : ':: view-transition-new (root)',
      },
    )
  })
}
</script>
```

é…å¥—æ ·å¼ï¼ˆç¡®ä¿ View Transition åŠ¨ç”»æ­£å¸¸å åŠ å¹¶æ”¯æŒæš—é»‘æ¨¡å¼åè½¬æ—¶çš„è¿‡æ¸¡å±‚ä¼˜å…ˆçº§ï¼‰ï¼š

```scss hl: 1-21
:: view-transition-old (root),
:: view-transition-new (root) {
  mix-blend-mode: normal;
  animation: none;
}

:: view-transition-old (root) {
  z-index: 1;
}

:: view-transition-new (root) {
  z-index: 9999;
}

.dark:: view-transition-old (root) {
  z-index: 9999;
}

.dark:: view-transition-new (root) {
  z-index: 1;
}
```

## è‡ªå®šä¹‰ç¯å¢ƒå˜é‡

> [!quote]
> [[Vite#ç¯å¢ƒå˜é‡ä¸æ¨¡å¼]]

### å®šä¹‰ `.env` æ–‡ä»¶

Vite ä¼šè‡ªåŠ¨åŠ è½½ç¯å¢ƒç›®å½•ä¸­çš„ `.env` æ–‡ä»¶ï¼Œå¹¶å°†æ‰€æœ‰ä»¥ `VITE_` å¼€å¤´çš„å˜é‡æ³¨å…¥åˆ° `import.meta.env` ä¸­ã€‚

```text file:. env hl: 2,5
åº”ç”¨åç§°
VITE_APP_TITLE = "Vue3 Admin"

åº”ç”¨ç«¯å£
VITE_APP_PORT = 3000
```

> [!note]
> **`.env` æ–‡ä»¶ä¸­æ‰€æœ‰å€¼é»˜è®¤ä»¥å­—ç¬¦ä¸²å½¢å¼æ³¨å…¥**ã€‚è‹¥éœ€ä½¿ç”¨å¸ƒå°”æˆ–æ•°å­—ç±»å‹ï¼Œè¯·æ‰‹åŠ¨è½¬æ¢ã€‚

### ç±»å‹æç¤ºæ”¯æŒ

ä¸ºè·å¾— TypeScript æ™ºèƒ½æç¤ºï¼Œå¯æ‰©å±• `ImportMetaEnv` æ¥å£ã€‚

```ts file: vite-env. d. ts hl: 3-6,8-12,14-16
/// <reference types="vite/client" />

interface ViteTypeOptions {
  // å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œç¦æ­¢è®¿é—®æœªå£°æ˜çš„ç¯å¢ƒå˜é‡
  strictImportMetaEnv: unknown
}

interface ImportMetaEnv {
  readonly VITE_APP_TITLE: string
  readonly VITE_APP_PORT: number
  // æ›´å¤šç¯å¢ƒå˜é‡...
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

### ä½¿ç”¨ç¯å¢ƒå˜é‡

#### åŠ¨æ€æ›¿æ¢é¡µé¢æ ‡é¢˜

åœ¨ HTML ä¸­ä½¿ç”¨ `%VITE_APP_TITLE%` å ä½ç¬¦åŠ¨æ€æ›¿æ¢é¡µé¢æ ‡é¢˜ã€‚

```html file: index. html hl:7
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>%VITE_APP_TITLE%</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
```

#### è®¾ç½®å¼€å‘æœåŠ¡å™¨ç«¯å£

```ts file: vite. config. ts hl: 5,8,14
import { defineConfig, loadEnv } from 'vite'

// https://vite.dev/config/
export default defineConfig (({ mode }) => {
  const env = loadEnv (mode, './env')
  return {
    // ç¯å¢ƒç›®å½•
    envDir: './env',
    // å¼€å‘ç¯å¢ƒæœåŠ¡å™¨é…ç½®
    server: {
      // æœåŠ¡å™¨ä¸»æœºåï¼ˆå…è®¸é€šè¿‡å±€åŸŸç½‘è®¿é—®ï¼‰
      host: '0.0.0.0',
      // æœåŠ¡å™¨ç«¯å£
      port: +env. VITE_APP_PORT,
      // å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
      open: true,
      // å¯ç”¨è·¨åŸŸè¯·æ±‚æ”¯æŒï¼ˆCORSï¼‰
      cors: true,
      // å¯ç”¨çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHot Module Replacementï¼‰
      hmr: true,
    },
  }
})
```

## Axios äºŒæ¬¡å°è£…

Axios æ˜¯ä¸€ä¸ªåŸºäºÂ [promise](https://javascript.info/promise-basics)Â çš„ç½‘ç»œè¯·æ±‚åº“ï¼Œé€‚ç”¨äºæµè§ˆå™¨å’Œ [[Node.js]] ç¯å¢ƒï¼Œå…·å¤‡åŒæ„ï¼ˆ[isomorphic](https://www.lullabot.com/articles/what-is-an-isomorphic-application)ï¼‰ç‰¹æ€§ï¼Œå³ç›¸åŒä»£ç å¯è¿è¡Œäºå‰åç«¯ã€‚åœ¨æœåŠ¡ç«¯åŸºäº `http` æ¨¡å—ï¼Œåœ¨å®¢æˆ·ç«¯åˆ™ä½¿ç”¨åŸç”Ÿ `XMLHttpRequest`ã€‚

æ ¸å¿ƒç‰¹æ€§ï¼š

- æ”¯æŒæµè§ˆå™¨ç«¯å‘é€ [`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) è¯·æ±‚ï¼›
- æ”¯æŒ Node.js ä¸­å‘é€ [`http`](http://nodejs.org/api/http.html) è¯·æ±‚ï¼›
- åŸºäºåŸç”Ÿ [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)ï¼›
- æ”¯æŒè¯·æ±‚å’Œå“åº”æ‹¦æˆªï¼›
- è¯·æ±‚å’Œå“åº”æ•°æ®è½¬æ¢ï¼›
- æ”¯æŒè¯·æ±‚å–æ¶ˆä¸è¶…æ—¶è®¾ç½®ï¼›
- æŸ¥è¯¢å‚æ•°æ”¯æŒåµŒå¥—ç»“æ„åºåˆ—åŒ–ï¼›
- è‡ªåŠ¨å¤„ç†è¯·æ±‚ä½“æ ¼å¼ï¼Œæ”¯æŒï¼š
    - JSONï¼ˆ`application/json`ï¼‰
    - è¡¨å•æ•°æ®ï¼ˆ`multipart/form-data`ï¼‰
    - URL ç¼–ç ï¼ˆ`application/x-www-form-urlencoded`ï¼‰
- å¯å°† HTML è¡¨å•è‡ªåŠ¨è½¬æ¢ä¸º JSON å‘é€ï¼›
- è‡ªåŠ¨è§£æå’Œè½¬æ¢ JSON å“åº”æ•°æ®ï¼›
- æä¾›è¯·æ±‚è¿›åº¦ä¿¡æ¯ï¼ˆåŒ…æ‹¬ä¼ è¾“é€Ÿåº¦ä¸å‰©ä½™æ—¶é—´ï¼‰ï¼›
- åœ¨ Node.js ä¸­æ”¯æŒå¸¦å®½é™åˆ¶ï¼›
- å…¼å®¹æ ‡å‡†çš„ FormData å’Œ Blobï¼ˆåŒ…æ‹¬ Node.jsï¼‰ï¼›
- å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ [XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)ï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡»ã€‚

### å®‰è£…

```bash
pnpm install axios
```

### æ·»åŠ ç¯å¢ƒå˜é‡

```text file:. env hl:2
è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šmsï¼‰
VITE_APP_API_TIMEOUT = 10000
```

```text file:. env. development hl: 2,5,8
ä»£ç†å‰ç¼€
VITE_APP_BASE_API = "/api"

æ¥å£åœ°å€
VITE_APP_API_URL = "http://localhost:8080"

è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šmsï¼‰ï¼Œä¸º 0 è¡¨ç¤ºä¸è¶…æ—¶
VITE_APP_API_TIMEOUT = 0
```

```ts file: vite-env. d. ts hl: 11-14
/// <reference types="vite/client" />

interface ViteTypeOptions {
  // å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œç¦æ­¢è®¿é—®æœªå£°æ˜çš„ç¯å¢ƒå˜é‡
  strictImportMetaEnv: unknown
}

interface ImportMetaEnv {
  readonly VITE_APP_TITLE: string
  readonly VITE_APP_PORT: number
  readonly VITE_APP_BASE_API: string
  readonly VITE_APP_API_URL: string
  readonly VITE_APP_API_TIMEOUT: number
  // æ›´å¤šç¯å¢ƒå˜é‡...
}


interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

### Axios åŸºç¡€å°è£…

#### ç»Ÿä¸€å“åº”ç»“æ„ä½“

```ts file: request. ts
interface Result<T = any> {
  /**
   * å“åº”ç 
   */
  code: string
  /**
   * å“åº”æ¶ˆæ¯
   */
  message: string
  /**
   * å“åº”æ•°æ®
   */
  data: T
}
```

#### é”™è¯¯å¤„ç†æ˜ å°„è¡¨

```ts file: request. ts
const ERROR_HANDLERS: {
  /**
   * ä¸šåŠ¡é”™è¯¯å¤„ç†å™¨é›†åˆ
   * @key string - ä¸šåŠ¡é”™è¯¯ç ï¼ˆå¯¹åº” ResultCode æšä¸¾å€¼ï¼‰
   * @value () => void - å¯¹åº”çš„é”™è¯¯å¤„ç†å‡½æ•°
   * @property default - æœªåŒ¹é…é”™è¯¯ç æ—¶çš„é»˜è®¤å¤„ç†å™¨
   */
  business: Record<string, () => void> & { default: () => void }
  /**
   * HTTP é”™è¯¯æ¶ˆæ¯æ˜ å°„
   * @key number - HTTP çŠ¶æ€ç ï¼ˆå¦‚ 400ã€500ï¼‰
   * @value string - å¯¹åº”çš„å‹å¥½é”™è¯¯æç¤º
   * @property default - æœªåŒ¹é…çŠ¶æ€ç æ—¶çš„é»˜è®¤æç¤º
   */
  http: Record<number, string> & { default: string }
} = {
  business: {
    [ResultCode. TOKEN_INVALID]: () => handleTokenExpired (),
    default: () => ElMessage.error ('æœªçŸ¥ä¸šåŠ¡é”™è¯¯'),
  },
  http: {
    400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
    401: 'ä¼šè¯å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',
    403: 'æƒé™ä¸è¶³ï¼Œè¯·è”ç³»ç®¡ç†å‘˜',
    404: 'èµ„æºä¸å­˜åœ¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜',
    500: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜',
    default: 'æœªçŸ¥é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜',
  },
}
```

#### ä¼šè¯è¿‡æœŸå¤„ç†

```ts file: request. ts
const handleTokenExpired = () => {
  ElMessageBox.confirm ('ä¼šè¯å·²è¿‡æœŸï¼Œæ˜¯å¦é‡æ–°ç™»å½•ï¼Ÿ', 'æç¤º', {
    confirmButtonText: 'ç¡®å®š',
    cancelButtonText: 'å–æ¶ˆ',
    type: 'warning',
  }). then (() => location.reload ())
}
```

#### Http å°è£…ç±»

##### æ ¸å¿ƒå®ç°

```ts file: request. ts
import axios, { type AxiosInstance, type AxiosRequestConfig, type AxiosResponse } from 'axios'
import { ACCESS_TOKEN } from './constants'
import ResultCode from '@/enums/ResultCode'

/*******************************Http è¯·æ±‚å°è£…*********************************/
class Http {
  /**
   * Axios å®ä¾‹å¯¹è±¡ï¼Œå°è£…æ‰€æœ‰è¯·æ±‚çš„åŸºç¡€é…ç½®
   */
  private readonly axiosInstance: AxiosInstance

  constructor () {
    this. axiosInstance = axios.create ({
      /**
       * API åŸºç¡€è·¯å¾„ï¼ˆä»ç¯å¢ƒå˜é‡è·å–ï¼‰
       * @default import. meta. env. VITE_APP_BASE_API
       */
      baseURL: import. meta. env. VITE_APP_BASE_API,
      /**
       * è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰
       * @default Number (import. meta. env. VITE_APP_API_TIMEOUT)
       */
      timeout: Number (import. meta. env. VITE_APP_API_TIMEOUT),
      /**
       * é»˜è®¤è¯·æ±‚å¤´é…ç½®
       * @property Content-Type - é»˜è®¤ä½¿ç”¨ JSON æ ¼å¼
       */
      headers: { 'Content-Type': 'application/json; charset=utf-8' },
    })
    // è®¾ç½®è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨
    this.setupInterceptors ()
  }

  /**
   * è®¾ç½®è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨
   */
  private setupInterceptors () {
    // æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
    this.axiosInstance.interceptors.request.use (
      (config) => {
        // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
        const token = localStorage.getItem (ACCESS_TOKEN)
        if (token) {
          config. headers. Authorization = `Bearer ${token}`
        }

        return config
      },
      (error) => {
        // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
        return Promise.reject (error)
      },
    )

    // æ·»åŠ å“åº”æ‹¦æˆªå™¨
    this.axiosInstance.interceptors.response.use (
      (response: AxiosResponse<Result>) => this.handleSuccessResponse (response),
      (error) => this.handleErrorResponse (error),
    )
  }

  /**
   * å¤„ç†æˆåŠŸå“åº”ï¼ˆçŠ¶æ€ç  2xxï¼‰
   * @param response - åŸå§‹å“åº”å¯¹è±¡
   * @returns ä¸šåŠ¡æ•°æ®æˆ–äºŒè¿›åˆ¶å“åº”å¯¹è±¡
   * @throws å½“ä¸šåŠ¡ç éæˆåŠŸæ—¶æŠ›å‡ºé”™è¯¯
   */
  private handleSuccessResponse (response: AxiosResponse<Result>) {
    // 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚
    // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
    if (this.isBinaryResponse (response)) {
      return response
    }

    const { code, message, data } = response. data
    if (code === ResultCode. SUCCESS) {
      return data
    }

    this.handleBusinessError (code)
    return Promise.reject (new Error (message || 'è¯·æ±‚å¤±è´¥'))
  }

  /**
   * å¤„ç†å¤±è´¥å“åº”ï¼ˆçŠ¶æ€ç é 2xx æˆ–ç½‘ç»œé”™è¯¯ã€å–æ¶ˆè¯·æ±‚ç­‰ï¼‰
   * @param error - é”™è¯¯å¯¹è±¡
   * @returns å§‹ç»ˆè¿”å› rejected çŠ¶æ€çš„ Promise
   */
  private handleErrorResponse (error: any) {
    // è¶…å‡º 2xx èŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚
    // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
    if (axios.isCancel (error)) {
      return Promise.reject (new Error ('è¯·æ±‚è¢«å–æ¶ˆ'))
    }

    if (! error. response) {
      if (! navigator. onLine) {
        ElMessage.error ('ç½‘ç»œå·²æ–­å¼€ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥')
        return Promise.reject (new Error ('ç½‘ç»œæ–­å¼€'))
      }

      if (error. code === 'ECONNABORTED' || error.message.includes ('timeout')) {
        ElMessage.error ('è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•')
        return Promise.reject (new Error ('è¯·æ±‚è¶…æ—¶'))
      }

      ElMessage.error ('ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æ‚¨çš„è¿æ¥')
      return Promise.reject (new Error ('ç½‘ç»œå¼‚å¸¸'))
    }

    this.handleHttpError (error. response?. status)
    return Promise.reject (error)
  }

  this.handleHttpError (error. response?. status)
return Promise.reject (error)
}

/**
   * åˆ¤æ–­æ˜¯å¦ä¸ºäºŒè¿›åˆ¶ç±»å‹çš„å“åº”ï¼ˆå¦‚æ–‡ä»¶ä¸‹è½½ï¼‰
   *
   * ç”¨äºè·³è¿‡ä¸šåŠ¡çŠ¶æ€ç è§£æï¼Œç›´æ¥è¿”å›å“åº”ä½“ã€‚
   * é€šå¸¸ responseType ä¸º 'blob' æˆ– 'arraybuffer' æ—¶ï¼Œ
   * è¡¨ç¤ºæœåŠ¡ç«¯è¿”å›çš„æ˜¯æ–‡ä»¶æµï¼ˆå¦‚å¯¼å‡º Excelã€ä¸‹è½½ PDF ç­‰ï¼‰ã€‚
   *
   * @param response - Axios å“åº”å¯¹è±¡
   * @returns æ˜¯å¦ä¸ºäºŒè¿›åˆ¶å“åº”ç±»å‹
   */
private isBinaryResponse (response: AxiosResponse) {
  return response. config. responseType === 'blob' || response. config. responseType === 'arraybuffer'
}

/**
   * å¤„ç†ä¸šåŠ¡é”™è¯¯ç 
   * @param code - åç«¯å®šä¹‰çš„é”™è¯¯ç 
   */
private handleBusinessError (code: string) {
  const handler = ERROR_HANDLERS. business[code] || ERROR_HANDLERS. business. default
  handler ()
}

/**
   * å¤„ç† HTTP çŠ¶æ€ç é”™è¯¯
   * @param status - HTTP çŠ¶æ€ç ï¼ˆå¦‚ 401ã€500 ç­‰ï¼‰
   */
private handleHttpError (status: number) {
  const message = ERROR_HANDLERS. http[status] ?? ERROR_HANDLERS. http. default
  ElMessage.error (message)
}

/**
   * å‘èµ·é€šç”¨è¯·æ±‚
   * @template T - å“åº”æ•°æ®ç±»å‹
   * @param config - Axios è¯·æ±‚é…ç½®
   * @returns Promise<T> - è¿”å›å¤„ç†åçš„ä¸šåŠ¡æ•°æ® Promise
   *
   * @example
   * request<{ list: [] }>({ url: '/api/list' })
   */
request = <T = any>(config: AxiosRequestConfig): Promise<T> => {
  return this.axiosInstance.request (config)
}

/**
   * GET è¯·æ±‚å¿«æ·æ–¹æ³•
   * @template T - å“åº”æ•°æ®ç±»å‹
   * @param url - è¯·æ±‚åœ°å€
   * @param params - æŸ¥è¯¢å‚æ•°ï¼ˆæ‹¼æ¥åˆ° URLï¼‰
   * @param config - é¢å¤–è¯·æ±‚é…ç½®ï¼ˆå¯é€‰ï¼‰
   */
get = <T = any>(url: string, params?: any, config?: AxiosRequestConfig) => {
  return this. request<T>({
    ... config,
    url,
    method: 'GET',
    params,
  })
}
/**
   * POST è¯·æ±‚æ–¹æ³•
   * @param url è¯·æ±‚åœ°å€
   * @param data è¯·æ±‚å‚æ•°
   * @param config è¯·æ±‚é…ç½®
   * @returns Promise<T>
   */
post = <T = any>(url: string, data?: any, config?: AxiosRequestConfig) => {
  return this. request<T>({
    ... config,
    method: 'POST',
    url,
    data,
  })
}
/**
   * PUT è¯·æ±‚æ–¹æ³•
   * @param url è¯·æ±‚åœ°å€
   * @param data è¯·æ±‚å‚æ•°
   * @param config é…ç½®é¡¹
   * @returns Promise<T>
   */
put = <T = any>(url: string, data?: any, config?: AxiosRequestConfig) => {
  return this. request<T>({
    ... config,
    method: 'PUT',
    url,
    data,
  })
}
/**
   * DELETE è¯·æ±‚æ–¹æ³•
   * @param url è¯·æ±‚åœ°å€
   * @param config é…ç½®é¡¹
   * @returns Promise<T>
   */
delete = <T = any>(url: string, config?: AxiosRequestConfig) => {
  return this. request<T>({
    ... config,
    method: 'DELETE',
    url,
  })
}
}
```

##### å¯¼å‡ºè¯·æ±‚å®ä¾‹

```ts file: request. ts
const http = new Http ()
export const { request, get, post, put, delete: del } = http
export default http
```

### API æ¨¡å—å°è£…

#### ç”¨æˆ·æ¨¡å—

```ts file: api/modules/system/user/index. ts hl: 10-12
import { get } from '@/utils/request'
import type { UserInfo } from './types'

const USER_BASE_URL = '/system/user'

/**
 * è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
 * @returns {Promise<UserInfo>} å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
 */
export const getUserInfo = (): Promise<UserInfo> => {
  return get<UserInfo>(`${USER_BASE_URL}/me`)
}
```

#### ç™»å½•ç”¨æˆ·ç±»å‹å®šä¹‰

```ts file: api/modules/system/user/types. ts
/**
 * å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
 */
export type UserInfo = {
  /**
   * ç”¨æˆ· ID
   */
  userId: number
  /**
   * ç”¨æˆ·å
   */
  username: string
  /**
   * æ˜µç§°
   */
  nickname: string
  /**
   * å¤´åƒ URL
   */
  avatar: string
  /**
   * è§’è‰²é›†åˆ
   */
  roles: string[]
  /**
   * æƒé™é›†åˆ
   */
  permissions: string[]
}
```

#### æ¨¡å—ç»Ÿä¸€å¯¼å‡º

```ts file: api/index. ts
export * as userApi from './modules/system/user'
```

```ts file: api/types. ts
export * from './modules/system/user/types'
```

### åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜

å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæµè§ˆå™¨é‡‡ç”¨**åŒæºç­–ç•¥**ï¼šåªæœ‰åè®®ã€åŸŸåå’Œç«¯å£å®Œå…¨ä¸€è‡´çš„è¯·æ±‚æ‰è¢«è§†ä¸ºåŒæºï¼ŒéåŒæºè¯·æ±‚å°†æ— æ³•è®¿é—®å“åº”å†…å®¹ã€‚

å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯é€šè¿‡ [[Vite#åå‘ä»£ç†]] é…ç½®å®ç°è·¨åŸŸè½¬å‘ï¼›ç”Ÿäº§ç¯å¢ƒåˆ™é€šå¸¸ä½¿ç”¨ `nginx` é…ç½®åå‘ä»£ç†ï¼Œä»¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚

```ts file: vite. config. ts hl: 10-21
import { defineConfig, loadEnv } from 'vite'

// https://vite.dev/config/
export default defineConfig (({ mode }) => {
  const env = loadEnv (mode, './env')
  return {
    // å¼€å‘ç¯å¢ƒæœåŠ¡å™¨é…ç½®
    server: {
      // ä»£ç†é…ç½®å¯¹è±¡ï¼Œç”¨äºå¼€å‘æœåŠ¡å™¨è¯·æ±‚è½¬å‘
      proxy: {
        // å°†è¯·æ±‚è·¯å¾„ä»¥ VITE_APP_BASE_API å¼€å¤´çš„è¯·æ±‚ï¼Œä»£ç†åˆ°åç«¯ API åœ°å€
        [env. VITE_APP_BASE_API]: {
          // ç›®æ ‡æœåŠ¡å™¨åœ°å€ï¼Œéœ€è¦ä»£ç†åˆ°çš„åç«¯ API åœ°å€
          target: env. VITE_APP_API_URL,
          // æ˜¯å¦ä¿®æ”¹è¯·æ±‚æºï¼Œè®¾ç½®ä¸º true ä»¥æ­£ç¡®ä¼ é€’è·¨åŸŸ Cookie
          changeOrigin: true,
          // é‡å†™è·¯å¾„ï¼Œå°†è¯·æ±‚è·¯å¾„çš„å‰ç¼€æ›¿æ¢ä¸ºç©º
          rewrite: (path) => path.replace (new RegExp ('^' + env. VITE_APP_BASE_API), ''),
        },
      },
    },
  }
})
```

### API è°ƒç”¨ç¤ºä¾‹ï¼šè·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

ç»“åˆ VueUse çš„ [`useAsyncState()`](https://vueuse.org/core/useAsyncState/) å®ç°å¼‚æ­¥è¯·æ±‚ä¸åŠ è½½çŠ¶æ€ç®¡ç†ï¼š

```vue hl: 3-7,12,14
<template>
  <div class="mb-4 flex gap-4">
    <div v-loading="isLoading" class="box">
      <el-avatar :src="userInfo?.avatar">
        <SvgIcon icon-name="user" />
      </el-avatar>
    </div>
  </div>
</template>

<script setup lang="ts">
import { userApi } from '@/api'

const { isLoading, state: userInfo } = useAsyncState(userApi. getUserInfo, null)
</script>

<style lang="scss" scoped>
.box {
  @apply h-100px w-150px flex items-center justify-center rounded-lg bg-gray-300 dark: bg-gray-700;
}
</style>
```

## Animate.css åŠ¨ç”»åº“é›†æˆ

- [ ] TODO

## ECharts å°è£…

- [ ] TODO

## å›½é™…åŒ–æ”¯æŒ

- [ ] TODO

## å¸ƒå±€å¤§å°åˆ‡æ¢

- [ ] TODO
